# –û—Ç—á–µ—Ç: –£–ª—É—á—à–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–∞—Ç—á–µ–π FACEIT

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–†–∞–Ω–µ–µ –≤ —Ç–∞–±–ª–∏—Ü–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã –∏–∑ –º–∞—Ç—á–µ–π best of 3, –∞ –Ω–µ –ø–æ–ª–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–µ—Ä–∏–π. –≠—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ –ø—É—Ç–∞–Ω–∏—Ü—É –∏ –Ω–µ –¥–∞–≤–∞–ª–æ –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –º–∞—Ç—á–µ–π.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∫–∞—Ä—Ç –≤ –ø–æ–ª–Ω—ã–µ –º–∞—Ç—á–∏:**
```javascript
// –ù–æ–≤—ã–π –º–µ—Ç–æ–¥ groupMapsIntoMatches()
groupMapsIntoMatches(matches) {
  // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ competition_id, –¥–∞—Ç–µ, –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫—É –∏ —Å–æ–±—ã—Ç–∏—é
  const matchGroups = {};
  
  matches.forEach(match => {
    const key = `${competitionId}_${date}_${opponent}_${event}`;
    
    if (!matchGroups[key]) {
      matchGroups[key] = {
        competitionId,
        date,
        opponent,
        event,
        maps: [],
        ourWins: 0,
        oppWins: 0,
        totalMaps: 0
      };
    }
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Ä—Ç—É –≤ –≥—Ä—É–ø–ø—É
    const isWin = this.isWinFromMatch(match);
    matchGroups[key].maps.push({
      map: this.getMapFromMatch(match),
      ourScore: this.getOurScoreFromMatch(match),
      oppScore: this.getOppScoreFromMatch(match),
      isWin
    });
    
    if (isWin) {
      matchGroups[key].ourWins++;
    } else {
      matchGroups[key].oppWins++;
    }
  });
  
  // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≥—Ä—É–ø–ø—ã –≤ –ø–æ–ª–Ω—ã–µ –º–∞—Ç—á–∏
  return Object.values(matchGroups).map(group => ({
    id: group.competitionId,
    date: group.date,
    opponent: group.opponent,
    event: group.event,
    our: group.ourWins,
    opp: group.oppWins,
    result: `${group.ourWins}:${group.oppWins}`,
    wl: group.ourWins > group.oppWins ? 'W' : 'L',
    maps: group.maps,
    bestOf: this.determineBestOf(group.maps.length),
    totalMaps: group.totalMaps
  }));
}
```

### 2. **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
```javascript
// –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π formatMatchesForFrontend()
formatMatchesForFrontend(matches) {
  // –°–Ω–∞—á–∞–ª–∞ –≥—Ä—É–ø–ø–∏—Ä—É–µ–º –∫–∞—Ä—Ç—ã –≤ –ø–æ–ª–Ω—ã–µ –º–∞—Ç—á–∏
  const fullMatches = this.groupMapsIntoMatches(matches);
  
  return fullMatches.map(match => ({
    id: match.id,
    date: match.date,
    dateISO: match.dateISO,
    event: match.event,
    opponent: match.opponent,
    map: `Best of ${match.bestOf}`, // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º–∞—Ç –º–∞—Ç—á–∞
    our: match.our,
    opp: match.opp,
    result: match.result,
    wl: match.wl,
    source: 'FACEIT',
    maps: match.maps, // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–µ—Ç–∞–ª–∏ –∫–∞—Ä—Ç
    bestOf: match.bestOf,
    totalMaps: match.totalMaps
  }));
}
```

### 3. **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –º–∞—Ç—á–µ–π:**
```javascript
// –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫
const [expandedRows, setExpandedRows] = useState(new Set());

const toggleRowExpansion = (matchId) => {
  const newExpandedRows = new Set(expandedRows);
  if (newExpandedRows.has(matchId)) {
    newExpandedRows.delete(matchId);
  } else {
    newExpandedRows.add(matchId);
  }
  setExpandedRows(newExpandedRows);
};
```

### 4. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –∫–∞—Ä—Ç:**
```javascript
{/* –†–∞–∑–≤–µ—Ä–Ω—É—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ —Å –¥–µ—Ç–∞–ª—è–º–∏ –∫–∞—Ä—Ç */}
{isExpanded && hasMaps && (
  <TableRow>
    <TableCell colSpan={8} sx={{ backgroundColor: "grey.100", py: 2 }}>
      <Box>
        <Typography variant="subtitle2" gutterBottom>
          –î–µ—Ç–∞–ª–∏ –∫–∞—Ä—Ç ({match.maps.length} –∫–∞—Ä—Ç):
        </Typography>
        <Box display="flex" flexWrap="wrap" gap={1}>
          {match.maps.map((map, mapIndex) => (
            <Chip
              key={mapIndex}
              label={`${map.map}: ${map.ourScore}-${map.oppScore} ${map.isWin ? 'W' : 'L'}`}
              color={map.isWin ? "success" : "error"}
              size="small"
              variant="outlined"
            />
          ))}
        </Box>
      </Box>
    </TableCell>
  </TableRow>
)}
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ —É–ª—É—á—à–µ–Ω–∏—è:
- **–û—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å:** –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã (163 –∫–∞—Ä—Ç—ã)
- **–§–æ—Ä–º–∞—Ç:** "Mirage: 16-14 W", "Inferno: 13-16 L"
- **–ü—Ä–æ–±–ª–µ–º–∞:** –Ω–µ –±—ã–ª–æ –ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫–æ–π –º–∞—Ç—á –≤—ã–∏–≥—Ä–∞–Ω/–ø—Ä–æ–∏–≥—Ä–∞–Ω

### –ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏—è:
- **–û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è:** –ø–æ–ª–Ω—ã–µ –º–∞—Ç—á–∏ (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã)
- **–§–æ—Ä–º–∞—Ç:** "Best of 3: 2-1 W" (–ø–æ–±–µ–¥–∞ –≤ —Å–µ—Ä–∏–∏)
- **–î–µ—Ç–∞–ª–∏:** –º–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∂–¥—É—é –∫–∞—Ä—Ç—É
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:** 
  - –ü–æ–Ω—è—Ç–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–∞—Ç—á–∞
  - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∫–∞—Ä—Ç–∞–º
  - –õ—É—á—à–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê–ª–≥–æ—Ä–∏—Ç–º –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏:
1. **–ö–ª—é—á –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏:** `competitionId_date_opponent_event`
2. **–ü–æ–¥—Å—á–µ—Ç –ø–æ–±–µ–¥:** —Å—É–º–º–∏—Ä—É–µ–º –ø–æ–±–µ–¥—ã –ø–æ –∫–∞—Ä—Ç–∞–º
3. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:** –±–æ–ª—å—à–µ –ø–æ–±–µ–¥ = –ø–æ–±–µ–¥–∞ –≤ –º–∞—Ç—á–µ
4. **–§–æ—Ä–º–∞—Ç –º–∞—Ç—á–∞:** –æ–ø—Ä–µ–¥–µ–ª—è–µ–º Best of X –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∫–∞—Ä—Ç

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
- `getOpponentFromMatch()` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞
- `isWinFromMatch()` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–±–µ–¥—ã
- `getOurScoreFromMatch()` - –Ω–∞—à —Å—á–µ—Ç
- `getOppScoreFromMatch()` - —Å—á–µ—Ç –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞
- `determineBestOf()` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ –º–∞—Ç—á–∞

### UI —É–ª—É—á—à–µ–Ω–∏—è:
- **–ö–Ω–æ–ø–∫–∞ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è:** —Ç–æ–ª—å–∫–æ –¥–ª—è –º–∞—Ç—á–µ–π —Å –¥–µ—Ç–∞–ª—è–º–∏ –∫–∞—Ä—Ç
- **–†–∞–∑–≤–µ—Ä–Ω—É—Ç–∞—è —Å—Ç—Ä–æ–∫–∞:** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –∫–∞—Ä—Ç—ã –º–∞—Ç—á–∞
- **–¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è:** –∑–µ–ª–µ–Ω—ã–π –¥–ª—è –ø–æ–±–µ–¥, –∫—Ä–∞—Å–Ω—ã–π –¥–ª—è –ø–æ—Ä–∞–∂–µ–Ω–∏–π
- **–ö–æ–º–ø–∞–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:** —á–∏–ø—ã —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∫–∞—Ä—Ç

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!** –¢–µ–ø–µ—Ä—å —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –ü–æ–ª–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–∞—Ç—á–µ–π (—Å–µ—Ä–∏–∏ –∫–∞—Ä—Ç)
- –ü–æ–Ω—è—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç "Best of X"
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç—ã
- –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

‚úÖ **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–¥–∞
- –†–∞—Å—à–∏—Ä—è–µ–º—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

## üöÄ –°—Ç–∞—Ç—É—Å

**–ó–ê–í–ï–†–®–ï–ù–û** - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–∞—Ç—á–µ–π FACEIT –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–ª—É—á—à–µ–Ω–æ!
–¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –ø–æ–ª–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–∞—Ç—á–µ–π —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π –∫–∞—Ä—Ç.

